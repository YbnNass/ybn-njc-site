<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YBN x NewJackCity</title>
  <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Urbanist', sans-serif;
      background-color: #0a0a0a;
      color: #D9D9D9;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 40px;
      background-color: #000;
    }

    .logo-title {
      display: flex;
      align-items: center;
    }

    header img {
      width: 70px;
      height: auto;
      margin-right: 15px;
    }

    header h1 {
      font-size: 1.8rem;
      font-weight: 700;
      margin: 0;
    }

    header h1 .ybn {
      color: #FFFFFF;
    }

    header h1 .njc {
      color: #FFD700;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    nav a {
      color: #FFD700;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
      transition: color 0.3s ease;
    }

    nav a:hover {
      color: #ffffff;
    }

    .discord-login {
      background-color: #7289DA;
      color: white;
      padding: 10px 20px;
      border-radius: 20px;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.9rem;
    }

    main {
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
    }

    section {
      display: none;
      margin-bottom: 60px;
    }

    section.active {
      display: block;
    }

    section h2 {
      font-size: 2rem;
      margin-bottom: 20px;
      font-weight: 700;
      color: #FFD700;
    }

    section p {
      font-size: 1.1rem;
      line-height: 1.7;
    }

    section img {
      width: 100%;
      border-radius: 15px;
      margin-bottom: 20px;
      object-fit: cover;
      height: 400px;
    }

    iframe {
      width: 100%;
      height: 800px;
      border: none;
      border-radius: 10px;
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      nav {
        margin-top: 10px;
        flex-wrap: wrap;
        gap: 10px;
      }
      .discord-login {
        margin-top: 10px;
      }
      section img {
        height: 250px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-left">
      <div class="logo-title">
        <img src="https://i.ibb.co/Xf2MNWvv/LOGO-NJC-1.png" alt="Logo YBN New Jack City" />
        <h1><span class="ybn">YBN</span> x <span class="njc">NewJackCity</span> üóΩ</h1>
      </div>
      <nav>
        <a href="#accueil" onclick="showSection('accueil')">Accueil</a>
        <a href="#whitelist" onclick="showSection('whitelist')">Whitelist</a>
        <a href="https://discord.gg/tonliendiscord" target="_blank">Discord</a>
      </nav>
    </div>
    <a id="loginBtn" class="discord-login" href="#">Connexion</a>
  </header>

  <main>
    <section id="accueil" class="active">
      <h2>Bienvenue √† New Jack City</h2>
      <img src="https://s10.aconvert.com/convert/p3r68-cdx67/aa95k-iqark.jpg" alt="Vue New York City" />
      <p>
        Bienvenue √† New Jack City, une exp√©rience GTA RP pens√©e pour les passionn√©s de r√¥le-play authentique et immersif. Ici, la mentalit√© US est au c≈ìur de chaque interaction, offrant une atmosph√®re r√©aliste et engag√©e o√π chaque joueur a un r√¥le √† jouer.
      </p>
      <p>
        New Jack City propose une √©conomie r√©aliste et dynamique, con√ßue pour refl√©ter les v√©ritables m√©canismes d‚Äôune ville vivante. Chaque action, qu‚Äôil s‚Äôagisse d‚Äôun business l√©gal ou d‚Äôactivit√©s plus risqu√©es, impacte directement le monde qui vous entoure. Le travail, la strat√©gie et la loyaut√© sont les cl√©s pour progresser dans cet univers exigeant.
      </p>
      <p>
        Le Roleplay civil est fondamental √† New Jack City. Que vous incarniez un citoyen, un policier, ou un membre d‚Äôun gang, votre immersion et votre implication dans la vie civile sont primordiales. Le RP ne se limite pas √† la violence ou aux conflits : il passe par des interactions riches, des relations authentiques et un respect des codes qui d√©finissent une vraie communaut√©.
      </p>
      <p>
        Pour garantir une qualit√© de jeu optimale, l‚Äôacc√®s au serveur se fait via un processus de whitelist rigoureux. Ce dernier inclut un questionnaire permettant d‚Äô√©valuer votre compr√©hension des r√®gles, de l‚Äôunivers RP et des exigences du serveur. Une fois valid√©, un entretien vocal avec un membre du staff vous sera propos√© afin de finaliser votre int√©gration.
      </p>
      <p>
        Nous vous invitons √† rejoindre New Jack City si vous √™tes pr√™ts √† vous investir dans un projet s√©rieux, o√π la profondeur du r√¥le, la coh√©rence √©conomique et l‚Äôimmersion sont au centre de l‚Äôexp√©rience.
      </p>
    </section>

    <section id="whitelist">
      <h2>üìù Formulaire Whitelist</h2>
      <p>Remplis le QCM ci-dessous pour prouver que tu connais les r√®gles, le RP et l‚Äôunivers. Si tu valides, tu passeras en vocal avec le staff pour obtenir ton r√¥le sur Discord.</p>
      <iframe src="https://docs.google.com/forms/d/e/TON_ID_DE_FORMULAIRE/viewform?embedded=true">Chargement‚Ä¶</iframe>
    </section>
  </main>

  <script>
    function showSection(id) {
      document.querySelectorAll('main section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(id).classList.add('active');
    }

    const loginBtn = document.getElementById('loginBtn');

    function getAccessTokenFromUrl() {
      const hash = window.location.hash;
      if (!hash) return null;
      const params = new URLSearchParams(hash.substring(1));
      return params.get('access_token');
    }

    async function fetchUserInfo(token) {
      try {
        const response = await fetch('https://discord.com/api/users/@me', {
          headers: {
            Authorization: `Bearer ${token}`
          }
        });
        if (!response.ok) throw new Error('Invalid token');
        return await response.json();
      } catch (e) {
        console.error('Erreur lors de la r√©cup√©ration des infos Discord :', e);
        return null;
      }
    }

    async function handleLogin() {
      const token = getAccessTokenFromUrl();

      if (token) {
        const user = await fetchUserInfo(token);
        if (user) {
          loginBtn.textContent = `Connect√© : ${user.username}`;
          loginBtn.href = "https://discord.com";
        } else {
          setLoginLink();
        }
      } else {
        setLoginLink();
      }
    }

    function setLoginLink() {
      const clientId = "1375199865566531725";
      const redirectUri = encodeURIComponent("https://ybnnass.github.io/ybn-njc-site/");
      const scope = "identify";
      const responseType = "token";
      const discordOAuthURL = `https://discord.com/oauth2/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=${responseType}&scope=${scope}`;
      loginBtn.href = discordOAuthURL;
    }

    handleLogin();
  </script>
</body>
</html>
